## Papyrus-RT Buildfix Plugin

This plugin enable building and running CDT projects generated by Papyrus-RT whithin the IDE itself. This plugin extends the code generator to patch the generated `.cproject` file by adding the missing linker libraries.

More specifically, the plugin adds `$UMLRTS_ROOT/lib/linux.x86-gcc-4.6.3` to the libraries path and the two libraries `rts` and `pthread` as dependencies.

## Requirements
Obviously, you will need  `g++` and `make` to build the CDT project. On Windows, these can be installed via [Cygwin](https://www.cygwin.com/).

In addition, the plugin assumes that the directory `$UMLRTS_ROOT/lib/linux.x86-gcc-4.6.3` contains the RTS library, i.e. `librts.a`. By default, Papyrus-RT ships with a version of the RTS compatible with most Linux systems. For Windows and macOS, you need to manually build the RTS first (see [Installation](#installation)).

## Installation
<a name="installation"></a>

Simply grab the [latest release](https://github.com/kjahed/papyrusrt-buildfix/releases/latest) and drop it in the `plugin` folder of your Papyrus-RT installation.

### macOS
On macOS, you need to build the RTS by running `make` in `$UMLRTS_ROOT`. If the build process fails, you might need to patch the RTS first by following the instructions [here](https://github.com/kjahed/papyrusrt-rts-macOS).

### Windows
On Windows, you need to install [Cygwin](https://www.cygwin.com/) with the following packages:
* gcc-g++
* make
* cmake

Then, navigate to `$UMLRTS_ROOT` from a Cygwin terminal and run the following
```
mkdir rtsbuild && cd rtsbuild
cmake ..
make
mv librtsd.a ../lib/linux.x86-gcc-4.6.3/librts.a
```

## Known Issues
* On macOS 'High Sierra', the CDT project might fail to run with a '*cannot create pty*' error. This is due to a bug in older versions of Eclipse CDT.  You need to update the `org.eclipse.cdt.core.macosx` plugin included with Papyrus-RT. The lastest version can be obtained from the [CDT p2 repository]((https://www.eclipse.org/cdt/downloads.php)).
